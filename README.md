# myorder_hw
[Homework] Project: The Historical Court (Multi-Agent System)

# เอกสารอธิบายโปรเจกต์: The Historical Court (ศาลจำลองประวัติศาสตร์)

โปรเจกต์นี้คือระบบ Multi-Agent ที่สร้างขึ้นด้วย Google ADK เพื่อจำลองกระบวนการในชั้นศาลสำหรับวิเคราะห์บุคคลหรือเหตุการณ์ในประวัติศาสตร์ โดยมีเป้าหมายเพื่อสร้างรายงานสรุปที่เป็นกลางจากการสืบค้นข้อมูลทั้งในแง่บวกและแง่ลบ

## โครงสร้างและขั้นตอนการทำงาน (Architecture & Workflow)

ระบบประกอบด้วย Agent หลายตัวที่ทำงานร่วมกันใน 4 ขั้นตอนหลัก ซึ่งควบคุมโดย Agent ที่มีโครงสร้างแบบลำดับ (Sequential), แบบขนาน (Parallel), และแบบวนซ้ำ (Loop)

---

### ขั้นตอนที่ 1: The Inquiry (การรับเรื่อง)

-   **Agent:** `inquiry_clerk` (Root Agent)
-   **บทบาท:** เป็น Agent ตัวแรกที่เริ่มต้นการสนทนากับผู้ใช้
-   **การทำงาน:**
    1.  ทักทายผู้ใช้และสอบถามถึงหัวข้อบุคคลหรือเหตุการณ์ประวัติศาสตร์ที่ต้องการวิเคราะห์
    2.  ใช้เครื่องมือ `append_to_state` เพื่อบันทึกหัวข้อที่ผู้ใช้ป้อนลงใน State key ชื่อ `TOPIC`
    3.  ส่งมอบการควบคุมให้กับ `historical_court` Agent เพื่อเริ่มกระบวนการหลักต่อไป

---

### ขั้นตอนที่ 2: The Investigation (การสืบสวน)

ขั้นตอนนี้ทำงานแบบคู่ขนาน (Parallel) เพื่อรวบรวมข้อมูลจากสองมุมมองที่แตกต่างกัน

-   **Agent:** `investigation_team` (ParallelAgent)
-   **บทบาท:** จัดการการทำงานของ Agent นักวิจัยสองตัวให้ทำงานพร้อมกัน
-   **Sub-Agents:**
    -   **`admirer_researcher` (The Admirer):**
        -   **หน้าที่:** ค้นหาและรวบรวมข้อมูลเกี่ยวกับ "ความสำเร็จและด้านบวก" ของหัวข้อนั้นๆ
        -   **คำสั่ง:** ใช้ Wikipedia Tool ค้นหาโดยเติมคำว่า `achievements`, `successes` ต่อท้ายหัวข้อ
        -   **ผลลัพธ์:** บันทึกข้อมูลที่พบลงใน State key ชื่อ `pos_data`
    -   **`critic_researcher` (The Critic):**
        -   **หน้าที่:** ค้นหาและรวบรวมข้อมูลเกี่ยวกับ "ข้อผิดพลาด, ข้อโต้แย้ง, และด้านลบ"
        -   **คำสั่ง:** ใช้ Wikipedia Tool ค้นหาโดยเติมคำว่า `controversy`, `failures`, `criticism` ต่อท้ายหัวข้อ
        -   **ผลลัพธ์:** บันทึกข้อมูลที่พบลงใน State key ชื่อ `neg_data`

---

### ขั้นตอนที่ 3: The Trial & Review (การไต่สวนและพิจารณา)

-   **Agent:** `trial_and_review` (LoopAgent)
-   **บทบาท:** เป็นกระบวนการวนซ้ำเพื่อตรวจสอบและปรับปรุงข้อมูลให้มีความสมดุล
-   **การทำงาน:**
    1.  เริ่มต้นด้วยการเรียก `investigation_team` (ขั้นตอนที่ 2) เพื่อค้นหาข้อมูล
    2.  หลังจากนั้น เรียก `judge` Agent เพื่อประเมินข้อมูล
    3.  **`judge` (The Judge):**
        -   **หน้าที่:** ตรวจสอบข้อมูลใน `pos_data` และ `neg_data`
        -   **เงื่อนไข:**
            -   **ถ้าข้อมูลไม่สมดุล:** (เช่น ฝั่งใดฝั่งหนึ่งมีน้อยเกินไป) `judge` จะสั่งให้ทำการค้นคว้าเพิ่มเติม โดยระบุว่าข้อมูลส่วนไหนที่ยังขาดไป จากนั้น `LoopAgent` จะวนกลับไปทำขั้นตอนที่ 1 และ 2 ใหม่
            -   **ถ้าข้อมูลสมดุลและเพียงพอ:** `judge` จะใช้เครื่องมือ `exit_loop` เพื่อสิ้นสุดการทำงานของ `LoopAgent`
    4.  กระบวนการนี้จะวนซ้ำสูงสุด 3 รอบ (ตาม `max_iterations=3`)

---

### ขั้นตอนที่ 4: The Verdict (การตัดสินและสรุปผล)

-   **Agent:** `verdict_writer`
-   **บทบาท:** เป็น Agent สุดท้ายในกระบวนการ มีหน้าที่สรุปผลและบันทึกรายงาน
-   **การทำงาน:**
    1.  รับข้อมูล `TOPIC`, `pos_data`, และ `neg_data` จาก State
    2.  สร้างรายงานที่เป็นกลาง โดยสรุปและเปรียบเทียบข้อเท็จจริงจากทั้งสองด้าน
    3.  ใช้เครื่องมือ `write_file` เพื่อบันทึกรายงานฉบับสมบูรณ์เป็นไฟล์ `.txt`
    4.  ไฟล์จะถูกบันทึกในไดเรกทอรี `verdicts/` โดยใช้ชื่อหัวข้อเป็นชื่อไฟล์

## ภาพรวมโครงสร้าง Agent

```
root_agent (inquiry_clerk)
└── historical_court (SequentialAgent)
    ├── trial_and_review (LoopAgent)
    │   ├── investigation_team (ParallelAgent)
    │   │   ├── admirer_researcher
    │   │   └── critic_researcher
    │   └── judge
    └── verdict_writer
```
